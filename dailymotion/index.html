<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/index.css">
    <link rel="shortcut icon" href="media/favicon.ico" type="image/x-icon">
    <script src="https://kit.fontawesome.com/279a7b8cf7.js" crossorigin="anonymous"></script>
    <title>Focus on DailyMotion</title>
</head>
<body>
    <header>
        <nav id="nav">
            <img src="media/oldlogo_dailymotion.png" alt="Ancien logo de DailyMotion">
            <ul>
                <li><a href="" style="font-weight: bold;"><i class="fa-solid fa-house"></i></a></li>
                <li><a href="">Page 1</a></li>
                <li><a href="">Page 2</a></li>
                <li><a href="">Page 3</a></li>
                <li><a href="">Page 4</a></li>
            </ul>
            <span>
                <i class="fa-solid fa-angle-right"></i>
            </span>
        </nav>
        <div class="navigationOnPage">
            <a href="" id="upSection" style="opacity: 0; pointer-events: none;"><i class="fa-solid fa-angle-up"></i></a>
            <a href="#histoire" id="downSection"><i class="fa-solid fa-angle-down"></i></a>
        </div>
    </header>
    <main>
        <section id="dailymotion">
            <div class="container">
                <h2>Focus on <img src="media/logo_dailymotion.png" alt="DailyMotion"></h2>
            </div>
        </section>
        <section id="histoire">
            <div class="container">
                <h2>Lorem ipsum</h2>
                <a href="#">Voir l'article</a>
            </div>
        </section>
        <section id="serveur">
            <div class="container">
                <h2>Lorem ipsum</h2>
                <a href="#">Voir l'article</a>
            </div>
        </section>
        <section id="i1">
            <div class="container">
                <h2>Lorem ipsum</h2>
                <a href="#">Voir l'article</a>
            </div>
        </section>
        <section id="i2">
            <div class="container">
                <h2>Lorem ipsum</h2>
                <a href="#">Voir l'article</a>
            </div>
        </section>
    </main>
    <script>
        let dataNavigationOnPage = [
            ['dailymotion', '#fff'],
            ['histoire', '#000'],
            ['serveur', '#fff']
        ];
        document.getElementById('nav').addEventListener('mouseenter', (event) => {
            document.getElementById('nav').style.width = '90%';
        });
        document.getElementById('nav').addEventListener('mouseleave', (event) => {
            if (window.scrollY != 0) {
                document.getElementById('nav').style.width = '120px';
            }
        });
        function navigationOnPage () {
            if (window.scrollY == 0) {
                document.getElementById('nav').style.width = '90%';
            } else {
                document.getElementById('nav').style.width = '120px';
            }
            let displaySection = [0, -1];
            for (let index = 0; index < dataNavigationOnPage.length; index++) {
                var positionSection = ((document.getElementById(dataNavigationOnPage[index][0]).getBoundingClientRect().top)*-1)+(window.innerHeight/2);
                if ((positionSection >= 0 && positionSection < displaySection[1]) || displaySection[1] == -1) {
                    displaySection[0] = index;
                    displaySection[1] = positionSection;
                }
            }
            if (displaySection[0] == 0) {
                document.getElementById('upSection').style.opacity = '0';
                document.getElementById('upSection').style.pointerEvents = 'none';
                document.getElementById('downSection').style.opacity = '100%';
                document.getElementById('downSection').style.pointerEvents = 'all';
                document.getElementById('upSection').href = '#';
                document.getElementById('downSection').href = '#' + dataNavigationOnPage[displaySection[0]+1][0];
            } else if (displaySection[0] == dataNavigationOnPage.length - 1) {
                document.getElementById('downSection').style.opacity = '0';
                document.getElementById('downSection').style.pointerEvents = 'none';
                document.getElementById('upSection').style.opacity = '100%';
                document.getElementById('upSection').style.pointerEvents = 'all';
                document.getElementById('downSection').href = '#';
                document.getElementById('upSection').href = '#' + dataNavigationOnPage[displaySection[0]-1][0];
            } else {
                document.getElementById('upSection').style.opacity = '100%';
                document.getElementById('upSection').style.pointerEvents = 'all';
                document.getElementById('downSection').style.opacity = '100%';
                document.getElementById('downSection').style.pointerEvents = 'all';
                document.getElementById('upSection').href = '#' + dataNavigationOnPage[displaySection[0]-1][0];
                document.getElementById('downSection').href = '#' + dataNavigationOnPage[displaySection[0]+1][0];
            }
            document.getElementById('upSection').style.color = dataNavigationOnPage[displaySection[0]][1];
            document.getElementById('downSection').style.color = dataNavigationOnPage[displaySection[0]][1];
        }
        window.addEventListener('scroll', navigationOnPage);
    </script>
</body>
</html>
